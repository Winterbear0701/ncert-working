<!DOCTYPE html>
<html>
<head>
    <title>Test API Endpoints</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        pre { background: #f5f5f5; padding: 10px; overflow: auto; }
    </style>
</head>
<body>
    <h1>API Endpoint Tester</h1>
    
    <div class="section">
        <h2>Test Get Subjects API</h2>
        <p>Class: <input type="text" id="testClass" value="5"></p>
        <button onclick="testSubjects()">Test Get Subjects</button>
        <pre id="subjectsResult"></pre>
    </div>
    
    <div class="section">
        <h2>Test Get Chapters API</h2>
        <p>Class: <input type="text" id="testClass2" value="5"></p>
        <p>Subject: <input type="text" id="testSubject" value="Our Wondrous World"></p>
        <button onclick="testChapters()">Test Get Chapters</button>
        <pre id="chaptersResult"></pre>
    </div>
    
    <script>
        function testSubjects() {
            const classNum = document.getElementById('testClass').value;
            const url = `/superadmin/api/get-subjects/?class=${encodeURIComponent(classNum)}`;
            
            document.getElementById('subjectsResult').textContent = `Fetching from: ${url}\n\nLoading...`;
            
            fetch(url)
                .then(res => {
                    if (!res.ok) {
                        throw new Error(`HTTP ${res.status}: ${res.statusText}`);
                    }
                    return res.json();
                })
                .then(data => {
                    document.getElementById('subjectsResult').textContent = 
                        `URL: ${url}\n\nSuccess!\n\n` + JSON.stringify(data, null, 2);
                })
                .catch(err => {
                    document.getElementById('subjectsResult').textContent = 
                        `URL: ${url}\n\nError: ${err.message}`;
                });
        }
        
        function testChapters() {
            const classNum = document.getElementById('testClass2').value;
            const subject = document.getElementById('testSubject').value;
            const url = `/superadmin/api/get-chapters/?class=${encodeURIComponent(classNum)}&subject=${encodeURIComponent(subject)}`;
            
            document.getElementById('chaptersResult').textContent = `Fetching from: ${url}\n\nLoading...`;
            
            fetch(url)
                .then(res => {
                    if (!res.ok) {
                        throw new Error(`HTTP ${res.status}: ${res.statusText}`);
                    }
                    return res.json();
                })
                .then(data => {
                    document.getElementById('chaptersResult').textContent = 
                        `URL: ${url}\n\nSuccess!\n\n` + JSON.stringify(data, null, 2);
                })
                .catch(err => {
                    document.getElementById('chaptersResult').textContent = 
                        `URL: ${url}\n\nError: ${err.message}`;
                });
        }
    </script>
</body>
</html>
